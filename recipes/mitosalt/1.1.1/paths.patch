--- config_human.txt.old	2022-01-04 12:00:16.851116065 -0600
+++ config_human.txt	2022-01-04 19:37:55.459834982 -0600
@@ -1,27 +1,27 @@
 #TOOLS
-hisat2 = bin/hisat2/hisat2
-lastal = bin/last/src/lastal
-lastsp = bin/last/src/last-split
-mfcv = bin/last/scripts/maf-convert
-reformat = bin/bbmap/reformat.sh
-samtools = bin/samtools/samtools
-sambamba = bin/sambamba
-b2fq = bin/bedtools2/bin/bamToFastq
-gcov = bin/bedtools2/bin/genomeCoverageBed
-intersectBed = bin/bedtools2/bin/intersectBed 
-sortBed = bin/bedtools2/bin/sortBed
-clusterBed = bin/bedtools2/bin/clusterBed  
-randomBed = bin/bedtools2/bin/randomBed
-groupBy = bin/bedtools2/bin/groupBy
-bg2bw = bin/bedGraphToBigWig
+hisat2 = hisat2
+lastal = lastal
+lastsp = last-split
+mfcv = maf-convert
+reformat = reformat.sh
+samtools = samtools
+sambamba = sambamba
+b2fq = bamToFastq
+gcov = genomeCoverageBed
+intersectBed = intersectBed 
+sortBed = sortBed
+clusterBed = clusterBed  
+randomBed = randomBed
+groupBy = groupBy
+bg2bw = bedGraphToBigWig
 
 #DATABASES
-hsindex = genome/hg19_g1k
-faindex = genome/hg19_g1k.fasta.fai
-lastindex = genome/human_mt_rCRS
-mtfaindex = genome/human_mt_rCRS.fasta.fai
-gsize = genome/hg19_g1k.size
-MT_fasta = genome/human_mt_rCRS.fasta
+hsindex = MITOSALT_DATA/genome/hg19_g1k
+faindex = MITOSALT_DATA/genome/hg19_g1k.fasta.fai
+lastindex = MITOSALT_DATA/genome/human_mt_rCRS
+mtfaindex = MITOSALT_DATA/genome/human_mt_rCRS.fasta.fai
+gsize = MITOSALT_DATA/genome/hg19_g1k.size
+MT_fasta = MITOSALT_DATA/genome/human_mt_rCRS.fasta
 
 #COMPUTATION
 threads = 10
@@ -58,18 +58,3 @@
 o_mt = yes #MITOCHONDRIAL READ EXTRACTION AND REMAPPING TO ONLY MITOCHONDRIAL GENOME WITH LASTAL
 i_del = yes #IDENTIFICATION AND CLUSTERING OF DELETIONS/DUPLICATIONS
 cn_mt = yes #ESTIMATION OF MT DNA COPY NUMBER (WORKS ONLY IF SAMPLES ARE NOT ENRICHED FOR MT DNA AND "nu_mt" AS WELL AS "o_mt" STEPS ARE RUNNING)
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
--- config_mouse.txt.old	2022-01-04 12:00:23.380137308 -0600
+++ config_mouse.txt	2022-01-04 19:37:58.954847552 -0600
@@ -1,27 +1,27 @@
 #TOOLS
-hisat2 = bin/hisat2/hisat2
-lastal = bin/last/src/lastal
-lastsp = bin/last/src/last-split
-mfcv = bin/last/scripts/maf-convert
-reformat = bin/bbmap/reformat.sh
-samtools = bin/samtools/samtools
-sambamba = bin/sambamba
-b2fq = bin/bedtools2/bin/bamToFastq
-gcov = bin/bedtools2/bin/genomeCoverageBed
-intersectBed = bin/bedtools2/bin/intersectBed
-sortBed = bin/bedtools2/bin/sortBed
-clusterBed = bin/bedtools2/bin/clusterBed
-randomBed = bin/bedtools2/bin/randomBed
-groupBy = bin/bedtools2/bin/groupBy
-bg2bw = bin/bedGraphToBigWig
+hisat2 = hisat2
+lastal = lastal
+lastsp = last-split
+mfcv = maf-convert
+reformat = reformat.sh
+samtools = samtools
+sambamba = sambamba
+b2fq = bamToFastq
+gcov = genomeCoverageBed
+intersectBed = intersectBed
+sortBed = sortBed
+clusterBed = clusterBed
+randomBed = randomBed
+groupBy = groupBy
+bg2bw = bedGraphToBigWig
 
 #DATABASES
-hsindex = genome/mm10
-faindex = genome/mm10.fasta.fai
-lastindex = genome/mouse_mt
-mtfaindex = genome/mouse_mt.fasta.fai
-gsize = genome/mm10.size
-MT_fasta = genome/mouse_mt.fasta
+hsindex = MITOSALT_DATA/genome/mm10
+faindex = MITOSALT_DATA/genome/mm10.fasta.fai
+lastindex = MITOSALT_DATA/genome/mouse_mt
+mtfaindex = MITOSALT_DATA/genome/mouse_mt.fasta.fai
+gsize = MITOSALT_DATA/genome/mm10.size
+MT_fasta = MITOSALT_DATA/genome/mouse_mt.fasta
 
 #COMPUTATION
 threads = 10
@@ -58,31 +58,3 @@
 o_mt = yes #MITOCHONDRIAL READ EXTRACTION AND REMAPPING TO ONLY MITOCHONDRIAL GENOME WITH LASTAL
 i_del = yes #IDENTIFICATION AND CLUSTERING OF DELETIONS/DUPLICATIONS
 cn_mt = yes #ESTIMATION OF MT DNA COPY NUMBER (WORKS ONLY IF SAMPLES ARE NOT ENRICHED FOR MT DNA AND "nu_mt" AS WELL AS "o_mt" STEPS ARE RUNNING)
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
--- delplot.R.old	2022-01-04 12:05:33.795259502 -0600
+++ delplot.R	2022-01-04 19:38:35.821980108 -0600
@@ -1,41 +1,3 @@
-#https://rdrr.io/github/PredictiveEcology/Require/src/R/setLibPaths.R (add MitoSAlt bin to paths)
-setLibPaths <- function(libPaths, standAlone = TRUE) {
-  oldLibPaths <- .libPaths()
-  #libPaths <- checkPath(normPath(libPaths), create = TRUE)#, mustWork = TRUE)
-
-  shim_fun <- .libPaths
-  shim_env <- new.env(parent = environment(shim_fun))
-  if (isTRUE(standAlone)) {
-    shim_env$.Library <- tail(.libPaths(), 1)
-  } else {
-    shim_env$.Library <- .libPaths()
-  }
-  shim_env$.Library.site <- character()
-
-  environment(shim_fun) <- shim_env
-  shim_fun(unique(libPaths))
-}
-
-setLibPaths("bin/",standAlone=FALSE) #add MitoSAlt bin to paths
-
-#check Biostring library
-check.biostring<-"Biostrings" %in% installed.packages()
-
-if(check.biostring=="FALSE"){
-    cat("Biostrings not installed, installing now!\n")
-    
-    rversion<-as.numeric(gsub(".*version\\s(.{3}).*","\\1",R.version.string))
-    if(rversion<=3.5){
-        source("http://bioconductor.org/biocLite.R")
-        biocLite("Biostrings")
-    }
-    else if(rversion>3.5){
-        if (!requireNamespace("BiocManager", quietly = TRUE))
-            install.packages("BiocManager")
-        BiocManager::install("Biostrings",lib="bin")
-    }
-} 
-
 #LOAD LIBRARIES
 library(plotrix)
 library(RColorBrewer)
@@ -474,20 +436,3 @@
 #bpfile<-"D.breakpoint"
 #filename<-"test_a"
 #hp.limit<-0.01
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
--- MitoSAlt1.1.1.pl.old	2022-01-04 12:07:44.364740584 -0600
+++ MitoSAlt1.1.1.pl	2022-01-04 19:39:45.169229456 -0600
@@ -1,9 +1,24 @@
-#!/usr/bin/perl
+#!/usr/bin/env perl
 use strict;
 use warnings;
 use List::Util qw(first min max sum);
 use Data::Dumper;
 
+#REMOVE EXISTING AND CREATE DIRECTORIES
+rmdir("log");
+rmdir("indel");
+rmdir("bam");
+rmdir("tab");
+rmdir("bw");
+mkdir("log");
+mkdir("indel");
+mkdir("bam");
+mkdir("tab");
+mkdir("bw");
+
+my $condaPrefix;
+$condaPrefix =  $ENV{'CONDA_PREFIX'};
+
 #INPUT 
 my $config_file = $ARGV[0];
 my $p1 = $ARGV[1];
@@ -200,7 +215,7 @@
 
   #PLOT DELETIONS
   print scalar(localtime).":Plot deletions/duplications\n";
-  system("R CMD BATCH --no-save --no-restore \'--args $msize $orihs $orihe $orils $orile $sizelimit indel/$tag.cluster indel/$tag.breakpoint $tag $hplimit $MT_fasta $flank\' delplot.R");
+  system("R CMD BATCH --no-save --no-restore \'--args $msize $orihs $orihe $orils $orile $sizelimit indel/$tag.cluster indel/$tag.breakpoint $tag $hplimit $MT_fasta $flank\' ${condaPrefix}/bin/delplot.R");
 }
 
 if($rmtmp eq 'yes'){
@@ -1033,5 +1048,3 @@
   }
   close(CF);
 }
-
-
